<html>
<head>
    <meta charset="UTF-8">

    <style>

    body {
      margin: 1in;
      font-family: 'Futura', sans-serif;
    }

    </style>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body>
    <h1>Project 1</h1>
    <h3>Sydney Bednar, Noorejehan Umar, Victoria Eshun</h3>
    <p>Color Palette</p>
    <p style="color: #ff0050">PINK</p>
    <p style="color: #00f2ea">AQUA</p>
    <p>BLACK</p>
    <img src='palette.png' width=300 height=300 />
    <p>
    <svg id="scatter" width=500 height=1000>
    </svg>
    </p>

    <script>
    const requestData = async function() {
        const data = await d3.csv('TikTok_songs_2022.csv');
        console.log(data);

        const svg=d3.select("svg#scatter")
        const width = svg.attr("width");
        const height = svg.attr("height");
        const margin = {top: 50, right: 10, bottom: 50, left: 50};
        const chartWidth = width - margin.left - margin.right;
        const chartHeight = height - margin.top - margin.bottom;

        let annotations = svg.append("g").attr("id","annotations");
        let chartArea = svg.append("g").attr("id","points")
                        .attr("transform",`translate(${margin.left},${margin.top})`);

        const popExtent = d3.extent(data, d => d['track_pop'])
        const popScale = d3.scaleLinear()
                            .domain(popExtent)
                            .range([0, chartWidth])

        let bottomAxis = d3.axisBottom(popScale)

        annotations.append("g")
                   .attr("class", "x axis")
                   .attr("transform",`translate(${margin.left},${chartHeight+margin.top+10})`)
                   .call(bottomAxis)

        // danceability
        const danceExtent = d3.extent(data, d => d['danceability'])
        const danceScale = d3.scaleLinear()
                           .domain(danceExtent)
                           .range([chartHeight/5, 0])
        let danceAxis = d3.axisLeft(danceScale)

        annotations.append("g")
                  .attr("class", "y axis")
                  .attr("transform",`translate(${margin.left-10},${margin.top})`)
                  .call(danceAxis)

        let danceCircles = chartArea.selectAll("circles.dance").data(data)
                            .join("circle")
                            .attr("class", "dance")
                            .attr("r", 4)
                            .attr("cx", d => popScale(d['track_pop']))
                            .attr("cy", d => danceScale(d['danceability']))
                            .attr("fill", "#ff0050")
                            .attr("opacity", .6)

        chartArea.append("text")
                .attr("x", (chartWidth / 2))
                .attr("y", 0 - (margin.top / 2))
                .attr("text-anchor", "middle")
                .style("font-size", "16px")
                .text("Danceability");


        // tempo on same x axis
        const loudExtent = d3.extent(data, d => d['loudness'])
        const loudScale = d3.scaleLinear()
                            .domain(loudExtent)
                            .range([chartHeight/5, 0])

        let loudAxis = d3.axisLeft(loudScale)
        annotations.append("g")
                   .attr("class", "y axis")
                   .attr("transform",`translate(${margin.left-10},${margin.top+chartHeight/5+20})`)
                   .call(loudAxis)

       // let loudCircles = chartArea.selectAll("circles.loud").data(data)
       //                     .join("circle")
       //                     .attr("class", "loud")
       //                     .attr("r", 4)
       //                     .attr("cx", d => popScale(d['track_pop']))
       //                     .attr("cy", d => loudScale(d['loudness']))
       //                     .attr("fill", "black")
       //                     .attr("opacity", .6)

        chartArea.append("text")
               .attr("x", (chartWidth / 2))
               .attr("y", (chartHeight*2/5)/2+20)
               .attr("text-anchor", "middle")
               .style("font-size", "16px")
               .text("Loudness");


    }
    requestData();

    </script>

</body>
</html>
